<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>农情速知 - 智慧农业云平台 Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary-green: #00b894;
            --dark-green: #00cec9;
            --accent-blue: #0984e3;
            --warning-yellow: #fdcb6e;
            --danger-red: #d63031;
            /* 更高级的毛玻璃背景变量 */
            --glass-bg: rgba(255, 255, 255, 0.75);
            --glass-border: 1px solid rgba(255, 255, 255, 0.8);
            --shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
            --text-main: #2d3436;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; }

        body {
            /* 背景图 */
            background: url('https://images.unsplash.com/photo-1625246333195-78d9c38ad449?q=80&w=2940&auto=format&fit=crop') no-repeat center center fixed;
            background-size: cover;
            height: 100vh;
            overflow: hidden;
            display: flex;
            color: var(--text-main);
        }

        /* 侧边栏 */
        .sidebar {
            width: 240px;
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            height: 100%;
            padding: 25px;
            border-right: 1px solid rgba(255,255,255,0.5);
            z-index: 100;
            display: flex;
            flex-direction: column;
        }

        .main-content {
            flex: 1;
            position: relative;
            padding: 20px;
            overflow-y: auto;
            background: rgba(0,0,0,0.02); /* 微弱遮罩让文字更清晰 */
        }

        /* Logo */
        .logo {
            font-size: 24px;
            font-weight: 800;
            background: linear-gradient(45deg, var(--primary-green), var(--accent-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* 导航项 */
        .nav-item {
            padding: 16px;
            border-radius: 16px;
            color: #636e72;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 500;
        }

        .nav-item.active, .nav-item:hover {
            background: linear-gradient(90deg, #e0f7fa, #ffffff);
            color: var(--accent-blue);
            box-shadow: 0 4px 15px rgba(0, 184, 148, 0.1);
            transform: translateX(5px);
        }

        /* 顶部栏 */
        .header-bar {
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .weather-badge {
            background: rgba(255, 255, 255, 0.9);
            color: var(--text-main);
            padding: 10px 20px;
            border-radius: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
            font-weight: 600;
            transition: 0.3s;
        }
        .weather-badge:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0,0,0,0.1); }

        /* 卡片通用样式 - Glassmorphism Pro */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-radius: 24px;
            border: var(--glass-border);
            box-shadow: var(--shadow);
            padding: 25px;
            margin-bottom: 25px;
            transition: transform 0.3s ease;
        }
        .glass-card:hover { transform: translateY(-3px); }

        /* 布局控制 */
        .section-container { display: none; animation: fadeIn 0.6s cubic-bezier(0.22, 1, 0.36, 1); max-width: 1400px; margin: 0 auto; }
        .section-container.active-section { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* ------ 农田监测美化 (Monitor Grid) ------ */
        .monitor-grid {
            display: grid;
            grid-template-columns: 320px 1fr 280px;
            gap: 25px;
            /* height: 600px; */
        }

        /* 左侧数据栏 */
        .data-box {
            background: rgba(255,255,255,0.6);
            border-radius: 16px;
            padding: 15px;
            margin-top: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .data-icon {
            width: 45px; height: 45px;
            border-radius: 12px;
            background: linear-gradient(135deg, #a8e6cf, #dcedc1);
            display: flex; align-items: center; justify-content: center;
            font-size: 20px; color: #2d3436;
        }

        /* 中间地图区域 */
        .map-container {
            width: 100%; height: 100%; min-height: 400px;
            border-radius: 24px;
            background: url('https://api.mapbox.com/styles/v1/mapbox/satellite-v9/static/113.6,34.7,13,0/800x600?access_token=YOUR_TOKEN') center/cover;
            /* 模拟卫星图背景 */
            background-color: #2c3e50;
            background-image: radial-gradient(#34495e 1px, transparent 1px);
            background-size: 20px 20px;
            position: relative;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.2);
            overflow: hidden;
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        /* 呼吸灯标记点 */
        .map-marker {
            position: absolute; width: 16px; height: 16px; background: #e74c3c;
            border-radius: 50%; border: 3px solid #fff;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            cursor: pointer; transform: translate(-50%, -50%);
            z-index: 2;
        }
        .map-marker::after {
            content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 40px; height: 40px; background: rgba(231, 76, 60, 0.4);
            border-radius: 50%; animation: pulse 2s infinite; z-index: -1;
        }
        .map-marker.normal { background: #00b894; }
        .map-marker.normal::after { background: rgba(0, 184, 148, 0.4); }
        
        .map-tooltip {
            position: absolute; background: rgba(255,255,255,0.95);
            padding: 8px 12px; border-radius: 8px; font-size: 12px; font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transform: translate(-50%, -150%); pointer-events: none;
            white-space: nowrap;
        }

        @keyframes pulse { 0% { width: 16px; height: 16px; opacity: 1; } 100% { width: 60px; height: 60px; opacity: 0; } }

        /* 右侧状态机 */
        .system-status {
            display: flex; flex-direction: column; gap: 15px;
            height: 100%; justify-content: center;
        }
        .status-indicator {
            padding: 15px; border-radius: 16px; background: rgba(255,255,255,0.5);
            display: flex; align-items: center; gap: 15px;
            border-left: 4px solid #ccc; transition: 0.3s;
        }
        .status-indicator.active { background: #fff; box-shadow: 0 5px 15px rgba(0,0,0,0.05); transform: scale(1.02); }
        .status-indicator.ok { border-color: var(--primary-green); }
        .status-indicator.warn { border-color: var(--warning-yellow); }
        
        /* ------ 其他模块样式 (保持简洁) ------ */
        .irrigation-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 25px; }
        
        /* 图片上传与扫描 */
        .scan-box {
            height: 250px; background: #f1f2f6; border-radius: 16px;
            border: 2px dashed #b2bec3; display: flex; flex-direction: column;
            align-items: center; justify-content: center; cursor: pointer;
            position: relative; overflow: hidden; transition: 0.3s;
        }
        .scan-box:hover { border-color: var(--primary-green); background: #e8f8f5; }
        .scan-line {
            position: absolute; width: 100%; height: 4px; background: var(--primary-green);
            box-shadow: 0 0 15px var(--primary-green); top: 0; left: 0;
            animation: scanning 2s infinite linear; display: none;
        }
        @keyframes scanning { 0% { top: 0; } 100% { top: 100%; } }

    </style>
</head>

<body>

    <div class="sidebar">
        <div class="logo"><i class="fas fa-leaf"></i> 农情速知 Pro</div>

        <div class="nav-item active" onclick="switchTab('monitor', this)">
            <i class="fas fa-chart-pie"></i> 农田监测
        </div>
        <div class="nav-item" onclick="switchTab('growth', this)">
            <i class="fas fa-chart-line"></i> 生长预测
        </div>
        <div class="nav-item" onclick="switchTab('irrigation', this)">
            <i class="fas fa-tint"></i> 智能灌溉
        </div>
        <div class="nav-item" onclick="switchTab('devices', this)">
            <i class="fas fa-robot"></i> 设备管理
        </div>

        <div style="margin-top: auto; padding: 20px; background: linear-gradient(135deg, #00b894, #00cec9); border-radius: 16px; color: white; text-align: center;">
            <div style="font-size: 12px; opacity: 0.9;">当前农户</div>
            <div style="font-weight: bold; font-size: 16px; margin: 5px 0 10px;">李大伯 (VIP)</div>
            <button onclick="alert('专家连线中...')" style="width:100%; padding:8px; background:rgba(255,255,255,0.2); border:1px solid rgba(255,255,255,0.4); color:white; border-radius:8px; cursor:pointer;">
                <i class="fas fa-headset"></i> 联系专家
            </button>
        </div>
    </div>

    <div class="main-content">

        <div class="header-bar">
            <div class="weather-badge" id="weatherBadge">
                <i class="fas fa-spinner fa-spin"></i> 正在获取定位与天气...
            </div>
            
            <div class="weather-badge" style="cursor: pointer;">
                <i class="fas fa-bell" style="color: #fdcb6e;"></i> 
                <span>3条新消息</span>
            </div>
        </div>

        <div id="section-monitor" class="section-container active-section">
            <div class="monitor-grid">
                <div style="display:flex; flex-direction:column; gap:20px;">
                    <div class="glass-card" style="flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center;">
                        <h4 style="align-self: flex-start; margin-bottom: 10px; color:#636e72;">土壤墒情</h4>
                        <div id="gaugeChart" style="width: 220px; height: 220px;"></div>
                        <div style="text-align: center; margin-top: -30px;">
                            <h2 style="font-size: 36px; color: var(--primary-green);">24%</h2>
                            <span style="padding: 4px 12px; background: #e8f8f5; color: var(--primary-green); border-radius: 12px; font-size: 12px;">适宜生长</span>
                        </div>
                    </div>

                    <div class="glass-card" style="flex:1;">
                        <h4 style="color:#636e72;">环境总览</h4>
                        <div class="data-box">
                            <div class="data-icon"><i class="fas fa-thermometer-half"></i></div>
                            <div>
                                <div style="font-size:12px; color:#999;">空气温度</div>
                                <div style="font-weight:bold; font-size:18px;">26.5°C</div>
                            </div>
                        </div>
                        <div class="data-box">
                            <div class="data-icon" style="background: linear-gradient(135deg, #fab1a0, #ff7675);"><i class="fas fa-sun"></i></div>
                            <div>
                                <div style="font-size:12px; color:#999;">光照强度</div>
                                <div style="font-weight:bold; font-size:18px;">4500 Lux</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="glass-card" style="padding: 10px; display: flex; flex-direction: column;">
                    <div style="display:flex; justify-content:space-between; margin: 10px 10px 20px;">
                        <h3><i class="fas fa-map-marked-alt"></i> 实时地块监控</h3>
                        <select style="background:transparent; border:1px solid #ddd; padding:5px 10px; border-radius:8px;">
                            <option>1号麦田 (当前)</option>
                            <option>2号玉米地</option>
                        </select>
                    </div>
                    <div class="map-container">
                        <div style="position:absolute; width:100%; height:100%; background: linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px); background-size: 50px 50px;"></div>
                        
                        <div class="map-marker normal" style="top: 40%; left: 30%;">
                            <div class="map-tooltip">传感器 #01<br>湿度: 24%</div>
                        </div>
                        
                        <div class="map-marker" style="top: 65%; left: 60%; background: #fdcb6e;">
                            <div class="map-tooltip">传感器 #02<br>电量低</div>
                        </div>

                        <div class="map-marker normal" style="top: 25%; left: 70%;">
                            <div class="map-tooltip">无人机<br>巡航中</div>
                        </div>
                    </div>
                </div>

                <div class="glass-card" style="display: flex; flex-direction: column;">
                    <h3>AI 决策大脑</h3>
                    <p style="font-size:13px; color:#999; margin-bottom:20px;">基于模型实时分析中...</p>
                    
                    <div class="system-status">
                        <div class="status-indicator active ok">
                            <i class="fas fa-check-circle" style="font-size: 24px; color: var(--primary-green);"></i>
                            <div>
                                <strong>无需灌溉</strong>
                                <div style="font-size:12px; color:#666;">土壤水分充足</div>
                            </div>
                        </div>
                        
                        <div class="status-indicator warn" style="opacity: 0.7;">
                            <i class="fas fa-exclamation-circle" style="font-size: 24px; color: var(--warning-yellow);"></i>
                            <div>
                                <strong>病害预警</strong>
                                <div style="font-size:12px; color:#666;">湿度大利于锈病</div>
                            </div>
                        </div>

                        <div class="status-indicator" style="opacity: 0.5;">
                            <i class="fas fa-bolt" style="font-size: 24px; color: #b2bec3;"></i>
                            <div>
                                <strong>设备正常</strong>
                                <div style="font-size:12px; color:#666;">所有节点在线</div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top:auto; padding: 15px; background:#f1f2f6; border-radius:12px;">
                        <small style="color:#666;">系统日志:</small>
                        <div style="font-size:12px; margin-top:5px; color:#2d3436;">10:00 - 数据同步完成</div>
                        <div style="font-size:12px; color:#2d3436;">09:30 - AI模型更新完毕</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="section-growth" class="section-container">
            <div class="glass-card">
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <h2><i class="fas fa-seedling"></i> 作物生长模型预测</h2>
                    <span style="padding:5px 15px; background:#e0f7fa; color:#00b894; border-radius:20px; font-size:12px;">作物：冬小麦 | 周期：拔节期</span>
                </div>
                
                <div id="growthChart" style="width: 100%; height: 400px; margin-top: 20px;"></div>

                <div class="irrigation-grid" style="margin-top:30px;">
                    <div>
                        <h4><i class="fas fa-info-circle"></i> 模型分析</h4>
                        <p style="color:#666; font-size:14px; line-height:1.6; margin-top:10px;">
                            根据当前气象数据（温度累计积温）与土壤肥力分析，您的小麦生长速度略<strong>高于标准模型 5%</strong>。
                            <br>预计将在 <strong>5月20日</strong> 进入灌浆高峰期，请提前准备追肥。
                        </p>
                    </div>
                    
                    <div class="scan-box" onclick="triggerScan()">
                        <input type="file" id="fileInput" hidden accept="image/*" onchange="handleImage(this)">
                        <div id="scanContent" style="text-align:center;">
                            <i class="fas fa-camera" style="font-size:48px; color:#b2bec3; margin-bottom:15px;"></i>
                            <div style="color:#636e72;">上传/拍摄作物照片</div>
                            <div style="font-size:12px; color:#b2bec3; margin-top:5px;">AI 自动识别病虫害</div>
                        </div>
                        <img id="previewImg" style="width:100%; height:100%; object-fit:cover; display:none;">
                        <div class="scan-line" id="scanLine"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="section-irrigation" class="section-container">
            <div class="glass-card">
                <h2>智能灌溉 (示例)</h2>
                <p>此处可复用之前的灌溉逻辑，已优化整体UI框架。</p>
            </div>
        </div>
        <div id="section-devices" class="section-container">
            <div class="glass-card">
                <h2>设备管理 (示例)</h2>
                <p>此处可复用之前的设备列表，已优化整体UI框架。</p>
            </div>
        </div>

    </div>

    <script>
        // 全局变量
        let growthChartIns = null;
        let gaugeChartIns = null;

        // 1. 真实天气获取 (Open-Meteo API, 无需 Key)
        async function getRealWeather() {
            const badge = document.getElementById('weatherBadge');
            
            if (!navigator.geolocation) {
                badge.innerHTML = '<i class="fas fa-map-marker-alt"></i> 您的浏览器不支持定位';
                return;
            }

            navigator.geolocation.getCurrentPosition(async (position) => {
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;
                
                try {
                    // 调用 Open-Meteo 免费气象接口
                    const response = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&hourly=relativehumidity_2m`);
                    const data = await response.json();
                    
                    const temp = data.current_weather.temperature;
                    const code = data.current_weather.weathercode;
                    // 估算当前湿度 (取最近一小时)
                    const hourIndex = new Date().getHours();
                    const humidity = data.hourly.relativehumidity_2m[hourIndex] || 50;

                    // 简单的天气代码映射
                    let weatherText = "晴";
                    let weatherIcon = "fa-sun";
                    if(code > 3) { weatherText = "多云"; weatherIcon = "fa-cloud"; }
                    if(code > 50) { weatherText = "雨"; weatherIcon = "fa-cloud-rain"; }
                    if(code > 70) { weatherText = "雪"; weatherIcon = "fa-snowflake"; }

                    badge.innerHTML = `
                        <i class="fas ${weatherIcon}" style="color:var(--accent-blue)"></i> 
                        当前位置 | ${weatherText} ${temp}°C | 湿度 ${humidity}%
                    `;

                } catch (e) {
                    console.error(e);
                    badge.innerHTML = '<i class="fas fa-exclamation-triangle"></i> 天气获取失败，使用离线数据';
                }
            }, (error) => {
                // 定位被拒绝或失败，使用默认演示数据
                badge.innerHTML = '<i class="fas fa-map-marker-alt"></i> 河南·郑州 (默认) | 晴 24°C | 湿度 45%';
            });
        }

        // 2. 初始化图表
        function initCharts() {
            // A. 土壤湿度仪表盘 (美化版)
            gaugeChartIns = echarts.init(document.getElementById('gaugeChart'));
            const gaugeOption = {
                series: [{
                    type: 'gauge',
                    startAngle: 180, endAngle: 0,
                    min: 0, max: 100,
                    radius: '100%',
                    center: ['50%', '70%'], // 半圆位置
                    axisLine: {
                        lineStyle: {
                            width: 30,
                            color: [
                                [0.3, '#fdcb6e'], // 干旱
                                [0.7, '#00b894'], // 适宜
                                [1, '#0984e3']    // 洪涝
                            ]
                        }
                    },
                    pointer: {
                        icon: 'path://M12.8,0.7l12,40.1H0.7L12.8,0.7z',
                        length: '12%', width: 20, offsetCenter: [0, '-60%'],
                        itemStyle: { color: 'auto' }
                    },
                    axisTick: { show: false },
                    splitLine: { show: false },
                    axisLabel: { show: false },
                    detail: { show: false }
                }]
            };
            gaugeChartIns.setOption(gaugeOption);

            // B. 生长预测曲线 (优化版 - 带置信区间)
            growthChartIns = echarts.init(document.getElementById('growthChart'));
            
            // 模拟数据
            // x轴: 10月到6月
            const dates = ['10月', '11月', '12月', '1月', '2月', '3月', '4月', '5月', '6月'];
            // 标准生长指数
            const standard = [5, 15, 20, 22, 25, 40, 65, 85, 100];
            // 实际生长指数
            const actual = [5, 18, 22, 24, 28, 45, null, null, null];
            
            // 构造置信区间 (标准值 ±5)
            const lowerBound = standard.map(v => v - 5);
            
            const growthOption = {
                tooltip: {
                    trigger: 'axis',
                    formatter: function (params) {
                        let html = params[0].name + '<br/>';
                        // 自定义 tooltip
                        params.forEach(p => {
                            if(p.seriesName !== '辅助底' && p.value != null) {
                                html += `<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${p.color};"></span>`;
                                html += `${p.seriesName}: ${p.value}<br/>`;
                            }
                        });
                        return html;
                    }
                },
                grid: { left: '3%', right: '4%', bottom: '3%', containLabel: true },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: dates,
                    axisLine: { lineStyle: { color: '#b2bec3' } }
                },
                yAxis: {
                    type: 'value',
                    name: '生长指数 (GVI)',
                    splitLine: { lineStyle: { type: 'dashed', color: 'rgba(0,0,0,0.1)' } }
                },
                series: [
                    // 1. 标准生长范围 (使用 stack 模拟区域)
                    {
                        name: '辅助底',
                        type: 'line',
                        data: lowerBound,
                        lineStyle: { opacity: 0 },
                        stack: 'confidence-band',
                        symbol: 'none'
                    },
                    {
                        name: '标准生长区间',
                        type: 'line',
                        data: standard.map(v => 10), // 宽度为 10 的带状
                        lineStyle: { opacity: 0 },
                        areaStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                { offset: 0, color: 'rgba(0, 184, 148, 0.2)' },
                                { offset: 1, color: 'rgba(0, 184, 148, 0.05)' }
                            ])
                        },
                        stack: 'confidence-band',
                        symbol: 'none'
                    },
                    // 2. 标准曲线
                    {
                        name: '标准模型',
                        type: 'line',
                        data: standard,
                        smooth: true,
                        lineStyle: { color: '#b2bec3', type: 'dashed', width: 2 },
                        symbol: 'none'
                    },
                    // 3. 实际曲线
                    {
                        name: '实际监测',
                        type: 'line',
                        data: actual,
                        smooth: true,
                        itemStyle: { color: '#0984e3' },
                        lineStyle: { width: 4, shadowBlur: 10, shadowColor: 'rgba(9, 132, 227, 0.5)' },
                        markPoint: {
                            data: [
                                { value: '当前', xAxis: 5, yAxis: 45, itemStyle: { color: '#e17055' } }
                            ]
                        },
                        areaStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                { offset: 0, color: 'rgba(9, 132, 227, 0.3)' },
                                { offset: 1, color: 'rgba(9, 132, 227, 0)' }
                            ])
                        }
                    }
                ]
            };
            growthChartIns.setOption(growthOption);
        }

        // 3. 交互逻辑
        function switchTab(id, el) {
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
            document.querySelectorAll('.section-container').forEach(s => s.classList.remove('active-section'));
            document.getElementById('section-' + id).classList.add('active-section');
            
            // 重新调整图表大小
            setTimeout(() => {
                if(gaugeChartIns) gaugeChartIns.resize();
                if(growthChartIns) growthChartIns.resize();
            }, 100);
        }

        // 4. 模拟图片上传
        function triggerScan() {
            document.getElementById('fileInput').click();
        }
        function handleImage(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    document.getElementById('scanContent').style.display = 'none';
                    const img = document.getElementById('previewImg');
                    img.src = e.target.result;
                    img.style.display = 'block';
                    
                    // 启动扫描线
                    const line = document.getElementById('scanLine');
                    line.style.display = 'block';
                    
                    setTimeout(() => {
                        line.style.display = 'none';
                        alert('AI 分析完成：\n健康度：95%\n未发现明显病害');
                    }, 2500);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        window.addEventListener('resize', () => {
            if(gaugeChartIns) gaugeChartIns.resize();
            if(growthChartIns) growthChartIns.resize();
        });

        // 初始化
        window.onload = function() {
            getRealWeather();
            initCharts();
        }

    </script>
</body>
</html>